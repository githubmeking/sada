<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No1Game - Gelişmiş Farm Oyunu</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <style>
        /* Genel Stil Ayarları */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #f0f8ff, #e6e6fa);
            color: #333;
            overflow-x: hidden;
        }

        /* Hoş Geldin Overlay */
        #welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 2s;
        }

        #welcome-overlay h1 {
            font-size: 2.5em;
            color: #1f3f60;
            text-shadow: 2px 2px 8px rgba(255, 165, 0, 0.8);
            font-family: 'Pacifico', cursive;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Boost Container (Geliştir) */
        #boost-container {
            padding: 20px;
            text-align: center;
        }
        #boost-container h1 {
            font-size: 2em;
            color: #1f3f60;
            margin-bottom: 20px;
            font-family: 'Pacifico', cursive;
        }

        /* Kaynaklar Container */
        .resource-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        .resource {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            width: 120px;
            text-align: center;
        }
        .resource-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #555;
        }
        .resource-value {
            font-size: 1.2em;
            color: #333;
        }

        /* Upgrade Butonları */
        .upgrades-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .upgrade-button {
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            min-height: 100px;
            justify-content: center;
            border: none;
            font-size: 1em;
            font-weight: bold;
            background-color: #f9f9f9;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .upgrade-button.active {
            background-color: #4caf50;
            color: white;
        }
        .upgrade-button.inactive {
            background-color: #f9f9f9;
            color: #333;
        }

        /* Yeni XP Multiplier Kaynağı */
        .resource#xp-multiplier-resource {
            background: #fff8e1;
            border: 2px solid #ff9800;
        }

        /* Farm Butonu */
        #farm-button {
            background: #ffeb3b;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            transition: background 0.3s, transform 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            margin: 20px auto;
            display: block;
            max-width: 300px;
        }

        #farm-button:hover {
            background: linear-gradient(45deg, #FFC107, #DDA0DD, #00BCD4);
            transform: scale(1.05);
        }

        /* Home Container */
        #home-container {
            padding: 20px;
            text-align: center;
        }
        #home-container h1 {
            font-size: 2.5em;
            color: #1f3f60;
            margin-bottom: 10px;
            font-family: 'Pacifico', cursive;
            text-shadow: 2px 2px 8px rgba(255, 165, 0, 0.8);
        }

        #home-container h2 {
            color: #1f3f60;
            margin-bottom: 10px;
        }

        #home-stats {
            text-align: left;
            margin: 20px auto;
            max-width: 400px;
        }

        .stat {
            margin: 10px 0;
            font-size: 1.1em;
        }

        /* Achievement Container */
        #achievement-container {
            margin-top: 20px;
            text-align: left;
            max-width: 600px;
            margin: 20px auto;
        }

        .achievement {
            background-color: #e6f7ff;
            padding: 10px;
            border-radius: 8px;
            margin: 5px 0;
            font-size: 1em;
            color: #005c99;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .achievement.completed {
            background-color: #d4edda;
            color: #155724;
        }

        .achievement .checkmark {
            font-size: 1.2em;
            color: #28a745;
        }

        /* Progress Bar */
        #progress-bar-container {
            margin-top: 20px;
            text-align: left;
            max-width: 600px;
            margin: 20px auto;
        }

        #progress-bar {
            width: 100%;
            background-color: #f3f3f3;
            border-radius: 25px;
            overflow: hidden;
            height: 20px;
            margin-top: 5px;
        }

        #progress-bar-fill {
            height: 100%;
            background-color: #4caf50;
            width: 0%;
            transition: width 0.5s;
        }

        /* Daily Tip */
        #daily-tip {
            margin-top: 20px;
            background-color: #fff8e1;
            padding: 10px;
            border-radius: 8px;
            font-size: 1em;
            color: #ff9800;
            border: 1px solid #ffecb3;
            max-width: 600px;
            margin: 20px auto;
            text-align: center;
        }

        /* Reward Container */
        .reward {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 8px;
            margin: 5px 0;
            font-size: 1em;
            color: #333;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: left;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .reward button {
            background-color: #ff4d4d;
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 0.9em;
        }

        .reward button.enabled {
            background-color: #4caf50;
            cursor: pointer;
        }

        .reward button.disabled {
            background-color: #ff4d4d;
            cursor: not-allowed;
        }

        .reward button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Start Button */
        .start-button {
            background-color: #4caf50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin: 10px 0;
        }

        .start-button:hover {
            background-color: #45a049;
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            .resource-container {
                flex-direction: column;
                align-items: center;
            }

            .upgrade-button {
                font-size: 0.9em;
                padding: 10px;
            }

            #language-selection {
                position: absolute;
                top: 20px;
                right: 20px;
                display: flex;
                gap: 10px;
            }

            .language-button {
                background-color: #ffffffcc;
                border: 2px solid #1f3f60;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 1.2em;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .language-button:hover {
                background-color: #1f3f60;
                color: #ffffff;
                transform: scale(1.1);
            }

            .language-button:focus {
                outline: none;
                box-shadow: 0 0 0 3px rgba(31, 63, 96, 0.5);
            }

            #home-container {
                margin-bottom: 100px;
            }

            .upgrades-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }

        /* Social Share */
        #social-share {
            margin: 15px 0;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        #social-share button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            color: white;
            transition: background-color 0.3s;
        }

        #social-share button:nth-child(1) { /* Facebook */
            background-color: #3b5998;
        }

        #social-share button:nth-child(1):hover {
            background-color: #2d4373;
        }

        #social-share button:nth-child(2) { /* Twitter */
            background-color: #1da1f2;
        }

        #social-share button:nth-child(2):hover {
            background-color: #0d95e8;
        }

        #social-share button:nth-child(3) { /* WhatsApp */
            background-color: #25d366;
        }

        #social-share button:nth-child(3):hover {
            background-color: #1ebe5a;
        }

        /* Arkadaş Listesi */
        #friends-list .friend {
            display: flex;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 8px;
            margin: 5px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .friend-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }

        .friend-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .friend-name {
            font-weight: bold;
            color: #333;
        }

        .friend-level {
            color: #555;
        }

        /* Referans Bilgisi */
        #referral-info {
            margin: 15px 0;
            font-size: 1em;
            color: #333;
            text-align: center;
        }

        /* Navigasyon Çubuğu */
        #nav-container {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #1f3f60;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.2);
        }

        .nav-button {
            color: white;
            text-align: center;
            cursor: pointer;
            transition: background 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 1em;
        }

        .nav-button:hover {
            background-color: #333;
            border-radius: 8px;
            padding: 5px;
        }

        /* Responsive Tasarım */
        @media (max-width: 600px) {
            #nav-container {
                flex-direction: row;
                justify-content: space-around;
                padding: 10px 0;
            }

            .nav-button {
                font-size: 0.8em;
            }

            .resource-container {
                flex-direction: column;
                align-items: center;
            }

            .upgrade-button {
                font-size: 0.9em;
                padding: 10px;
            }

            #language-selection {
                position: absolute;
                top: 20px;
                right: 20px;
                display: flex;
                gap: 10px;
            }

            .language-button {
                background-color: #ffffffcc;
                border: 2px solid #1f3f60;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 1.2em;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .language-button:hover {
                background-color: #1f3f60;
                color: #ffffff;
                transform: scale(1.1);
            }

            .language-button:focus {
                outline: none;
                box-shadow: 0 0 0 3px rgba(31, 63, 96, 0.5);
            }

            #home-container {
                position: relative;
                margin-bottom: 100px;
            }

            .upgrades-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Hoş Geldin Overlay -->
    <div id="welcome-overlay">
        <h1 id="welcome-message">Hoş Geldiniz No1Game'e!</h1>
    </div>

    <!-- Boost Container (Geliştir) -->
    <div id="boost-container" style="display:none;">
        <h1 id="boost-section-title">Geliştir Bölümü</h1>
        <div class="resource-container">
            <div class="resource" id="coin-resource">
                <div class="resource-title" id="coin-title">Coin</div>
                <div id="coin-value" class="resource-value">0</div>
            </div>
            <div class="resource" id="cps-resource">
                <div class="resource-title" id="cps-title">CPS</div>
                <div id="cps-value" class="resource-value">0</div>
            </div>
            <div class="resource" id="energy-resource">
                <div class="resource-title" id="energy-title">Enerji</div>
                <div id="energy-value" class="resource-value">1000</div>
            </div>
            <div class="resource" id="xp-resource">
                <div class="resource-title" id="xp-title">XP</div>
                <div id="xp-text" class="resource-value">0</div>
            </div>
            <!-- Yeni XP Multiplier Kaynağı -->
            <div class="resource" id="xp-multiplier-resource">
                <div class="resource-title" id="xp-multiplier-title">XP Çoğaltıcı</div>
                <div id="xp-value" class="resource-value">1x</div>
            </div>
        </div>

        <button id="farm-button">FARM</button>

        <div class="upgrades-container">
            <button class="upgrade-button inactive" id="click-upgrade">
                <span id="click-upgrade-text">Tıklama Güçlendirmesi</span>
                <span class="upgrade-cost" id="click-cost">Maliyet: 10 coin</span>
            </button>
            <button class="upgrade-button inactive" id="auto-upgrade">
                <span id="auto-upgrade-text">CPS Arttırma</span>
                <span class="upgrade-cost" id="auto-cost">Maliyet: 50 coin</span>
            </button>
            <button class="upgrade-button inactive" id="energy-upgrade">
                <span id="energy-upgrade-text">Enerji Yükseltme</span>
                <span class="upgrade-cost" id="energy-cost">Maliyet: 1.000 coin</span>
            </button>
            <!-- Yeni XP Multiplier Boost Butonu -->
            <button class="upgrade-button inactive" id="xp-upgrade">
                <span id="xp-upgrade-text">XP Çoğaltıcı</span>
                <span class="upgrade-cost" id="xp-cost">Maliyet: 500 coin</span>
            </button>
        </div>
    </div>

    <!-- Earn Container (Kazanç) -->
    <div id="earn-container" style="display:none;">
        <h2 id="daily-reward-title">Giriş Ödülü</h2>
        <button class="start-button" onclick="Game.collectDailyReward()" id="collect-daily-reward-button">5000 Coin Al</button>
        <div class="cooldown-timer" id="daily-reward-timer"></div>
        <h2 id="level-rewards-title">Seviye Ödülleri</h2>
        <div class="reward">
            <span id="level-reward-10-text">sv10: 1.000 XP</span>
            <button onclick="Game.claimLevelReward(10)" id="claim-reward-10" class="disabled" disabled>Al</button>
        </div>
        <div class="reward">
            <span id="level-reward-20-text">sv20: 2.000 XP</span>
            <button onclick="Game.claimLevelReward(20)" id="claim-reward-20" class="disabled" disabled>Al</button>
        </div>
        <div class="reward">
            <span id="level-reward-30-text">sv30: 5.000 XP</span>
            <button onclick="Game.claimLevelReward(30)" id="claim-reward-30" class="disabled" disabled>Al</button>
        </div>
        <div class="reward">
            <span id="level-reward-40-text">sv40: 7.000 XP</span>
            <button onclick="Game.claimLevelReward(40)" id="claim-reward-40" class="disabled" disabled>Al</button>
        </div>
        <div class="reward">
            <span id="level-reward-50-text">sv50: 10.000 XP</span>
            <button onclick="Game.claimLevelReward(50)" id="claim-reward-50" class="disabled" disabled>Al</button>
        </div>
        <div class="reward">
            <span id="level-reward-100-text">sv100: 50.000 XP</span>
            <button onclick="Game.claimLevelReward(100)" id="claim-reward-100" class="disabled" disabled>Al</button>
        </div>
    </div>

    <!-- Home Container -->
    <div id="home-container" style="display:none;">
        <h1 id="game-title">No1Game</h1>

        <!-- Dil Seçimi -->
         <div id="language-selection">
            <button id="lang-tr" class="language-button" title="Türkçe">
                🇹🇷
            </button>
            <button id="lang-en" class="language-button" title="English">
                🇺🇸
            </button>
        </div>

        <h2 id="player-stats-title">Oyuncu İstatistikleri</h2>
        <div id="home-stats">
            <div class="stat" id="total-coins-stat">Toplam Coin: <span id="home-coins">0</span></div>
            <div class="stat" id="level-stat">Seviye: <span id="home-level">1</span></div>
            <div class="stat" id="xp-stat">XP: <span id="home-xp">0</span> / <span id="home-xp-needed">100</span></div>
            <div class="stat" id="energy-stat">Enerji: <span id="home-energy">1000</span></div>
        </div>

        <div id="achievement-container">
            <h2 id="achievements-title">Başarımlar</h2>
            <div id="achievements-list">
                <!-- Başarımlar dinamik olarak eklenecek -->
            </div>
        </div>

        <div id="progress-bar-container">
            <h2 id="progress-title">Seviye İlerlemesi</h2>
            <div id="progress-bar">
                <div id="progress-bar-fill"></div>
            </div>
        </div>

        <div id="daily-tip">
            Günlük İpucu: Daha fazla enerji kazanmak için enerji yükseltmelerini tercih edin!
        </div>
    </div>

    <!-- Friends Container (Arkadaşlar) -->
    <div id="friends-container" style="display:none;">
        <h2 id="friends-title">Arkadaşlar</h2>
        <p id="total-referrals-text">Toplam Davet Edilen Kişi Sayısı: <span id="referral-count">0</span></p>
        <p id="invite-link-text">Davet Linkin:</p>
        <a href="#" id="invite-link">Davet Linki Yükleniyor...</a>
        
        <!-- Sosyal Paylaşım Butonları -->
        <div id="social-share">
            <button onclick="Game.shareOnFacebook()">Facebook'ta Paylaş</button>
            <button onclick="Game.shareOnTwitter()">Twitter'da Paylaş</button>
            <button onclick="Game.shareOnWhatsApp()">WhatsApp'ta Paylaş</button>
        </div>
        
        <!-- Referans Bilgisi -->
        <div id="referral-info">
            +1 Davet = 20.000 Coin
        </div>

        <!-- Arkadaş Listesi -->
        <h3>Arkadaş Listesi</h3>
        <div id="friends-list">
            <!-- Arkadaşlar dinamik olarak eklenecek -->
        </div>
    </div>

    <!-- Navigasyon Çubuğu -->
    <div id="nav-container">
        <div class="nav-button" id="home-nav">
            <i>🏠</i>
            <span id="nav-home-text">Ana Sayfa</span>
        </div>
        <div class="nav-button" id="earn-nav">
            <i>📋</i>
            <span id="nav-earn-text">Kazanç</span>
        </div>
        <div class="nav-button" id="boost-nav">
            <i>🚀</i>
            <span id="nav-boost-text">Geliştir</span>
        </div>
        <div class="nav-button" id="friends-nav">
            <i>👥</i>
            <span id="nav-friends-text">Arkadaşlar</span>
        </div>
    </div>

    <script>
        'use strict';

        // Dil Verileri
        const languageData = {
            tr: {
                welcomeMessage: "Hoş Geldiniz No1Game'e!",
                gameTitle: "No1Game",
                playerStatsTitle: "Oyuncu İstatistikleri",
                totalCoinsStat: "Toplam Coin:",
                levelStat: "Seviye:",
                xpStat: "XP:",
                energyStat: "Enerji:",
                achievementsTitle: "Başarımlar",
                progressTitle: "Seviye İlerlemesi",
                dailyTip: "Günlük İpucu: Daha fazla enerji kazanmak için enerji yükseltmelerini tercih edin!",
                farmButton: "FARM",
                boostSectionTitle: "Geliştir Bölümü",
                clickUpgrade: "Tıklama Güçlendirmesi",
                autoUpgrade: "CPS Arttırma",
                energyUpgrade: "Enerji Yükseltme",
                xpUpgrade: "XP Çoğaltıcı",
                upgradeCost: "Maliyet:",
                notEnoughEnergy: "Enerjiniz yeterli değil!",
                notEnoughCoins: "Yeterli coininiz yok!",
                rewardAlreadyClaimed: "Bu ödülü zaten aldınız!",
                insufficientLevel: "Yeterli seviyeye ulaşmadınız!",
                rewardCollected: (xp) => `${xp} XP kazandınız!`,
                dailyRewardCollected: "5000 Coin kazandınız!",
                dailyRewardCooldown: (time) => `Giriş ödülünüzü zaten aldınız. ${time} sonra tekrar deneyin.`,
                rewardReady: "Ödül hazır!",
                remainingTime: (time) => `Kalan süre: ${time}`,
                levelUpMessage: (level) => `Tebrikler! ${level}. seviyeye ulaştınız!`,
                claimButton: "Al",
                claimedButton: "Alındı",
                levelUnreached: "Seviye Ulaşılamadı",
                achievement1: "50.000 Coin Kazandınız!",
                achievement2: "100.000 Coin Kazandınız!",
                achievement3: "200.000 Coin Kazandınız!",
                achievement4: "300.000 Coin Kazandınız!",
                achievement5: "1.000.000 Coin Kazandınız!",
                achievement6: "500 Farm Yaptınız!"
            },
            en: {
                welcomeMessage: "Welcome to No1Game!",
                gameTitle: "No1Game",
                playerStatsTitle: "Player Statistics",
                totalCoinsStat: "Total Coins:",
                levelStat: "Level:",
                xpStat: "XP:",
                energyStat: "Energy:",
                achievementsTitle: "Achievements",
                progressTitle: "Level Progress",
                dailyTip: "Daily Tip: Prioritize energy upgrades to gain more energy!",
                farmButton: "FARM",
                boostSectionTitle: "Boost Section",
                clickUpgrade: "Click Enhancement",
                autoUpgrade: "Increase CPS",
                energyUpgrade: "Energy Upgrade",
                xpUpgrade: "XP Multiplier",
                upgradeCost: "Cost:",
                notEnoughEnergy: "You don't have enough energy!",
                notEnoughCoins: "You don't have enough coins!",
                rewardAlreadyClaimed: "You have already claimed this reward!",
                insufficientLevel: "You haven't reached the required level!",
                rewardCollected: (xp) => `You gained ${xp} XP!`,
                dailyRewardCollected: "You gained 5000 Coins!",
                dailyRewardCooldown: (time) => `You have already collected your daily reward. Try again in ${time}.`,
                rewardReady: "Reward is ready!",
                remainingTime: (time) => `Time remaining: ${time}`,
                levelUpMessage: (level) => `Congratulations! You've reached level ${level}!`,
                claimButton: "Claim",
                claimedButton: "Claimed",
                levelUnreached: "Level Unreached",
                achievement1: "You've earned 50,000 Coins!",
                achievement2: "You've earned 100,000 Coins!",
                achievement3: "You've earned 200,000 Coins!",
                achievement4: "You've earned 300,000 Coins!",
                achievement5: "You've earned 1,000,000 Coins!",
                achievement6: "You've farmed 500 times!"
            }
        };

        // Seçili Dil
        let currentLanguage = localStorage.getItem('language') || 'tr';

        // Oyun Durumu
        const Game = {
            state: {
                coins: 0,
                clickPower: 1,
                autoCollectPower: 0,
                energy: 1000,
                farmCount: 0,
                upgrades: {
                    click: { level: 1, cost: 10 },
                    auto: { level: 0, cost: 50 },
                    energy: { level: 1, cost: 1000 },
                    xp: { level: 0, cost: 500, multiplier: 1 } // Yeni XP Boost
                },
                xpMultiplier: 1,
                referrals: 0
            },
            playerXP: 0,
            playerLevel: 1,
            awardedLevels: {},
            lastCollected: parseInt(localStorage.getItem('lastCollected')) || 0,
            daysLoggedIn: parseInt(localStorage.getItem('daysLoggedIn')) || 0,
            lastLoginDate: localStorage.getItem('lastLoginDate') || null,

            // Seviye Ödülleri ve XP Yükseltmeleri
            rewardLevels: {
                10: { xp: 1000 },
                20: { xp: 2000 },
                30: { xp: 5000 },
                40: { xp: 7000 },
                50: { xp: 10000 },
                100: { xp: 50000 }
            },

            // Başarımların Tanımlanması
            predefinedAchievements: [
                { id: 1, description: "50.000 Coin Kazandınız!", coinAmount: 50000, completed: false },
                { id: 2, description: "100.000 Coin Kazandınız!", coinAmount: 100000, completed: false },
                { id: 3, description: "200.000 Coin Kazandınız!", coinAmount: 200000, completed: false },
                { id: 4, description: "300.000 Coin Kazandınız!", coinAmount: 300000, completed: false },
                { id: 5, description: "1.000.000 Coin Kazandınız!", coinAmount: 1000000, completed: false },
                { id: 6, description: "500 Farm Yaptınız!", farmCount: 500, completed: false }
            ],

            // Initialize Function
            init: function() {
                this.loadGame();
                this.loadAchievements();
                this.setupEventListeners();
                this.updateDisplay();
                this.startIntervals();
                this.displayDailyTip();
                this.processReferral();
                this.incrementDaysLoggedIn();
                this.showBoostContainer(); // Başlangıçta Geliştir Bölümünü Göster
            },

            // Load Game Data
            loadGame: function() {
                const savedData = JSON.parse(localStorage.getItem('no1gameData'));
                if (savedData && typeof savedData === 'object') {
                    this.state = savedData.gameState || this.state;
                    this.playerXP = savedData.playerXP || this.playerXP;
                    this.playerLevel = savedData.playerLevel || this.playerLevel;
                    this.awardedLevels = savedData.awardedLevels || this.awardedLevels;
                    this.lastCollected = savedData.lastCollected || this.lastCollected;
                    this.daysLoggedIn = savedData.daysLoggedIn || this.daysLoggedIn;
                    this.lastLoginDate = savedData.lastLoginDate || this.lastLoginDate;
                    console.log("Oyun yüklendi:", savedData);
                } else {
                    console.log("Yeni oyun başlatılıyor.");
                    this.saveGame();
                }
                this.updateDisplay();
                this.updateXPDisplay();
                this.styleNo1Game();
                this.updateEarnRewards();
            },

            // Save Game Data
            saveGame: function() {
                const gameData = {
                    gameState: this.state,
                    playerXP: this.playerXP,
                    playerLevel: this.playerLevel,
                    awardedLevels: this.awardedLevels,
                    lastCollected: this.lastCollected,
                    daysLoggedIn: this.daysLoggedIn,
                    lastLoginDate: this.lastLoginDate
                };
                localStorage.setItem('no1gameData', JSON.stringify(gameData));
                console.log("Oyun kaydedildi.");
            },

            // Load Achievements
            loadAchievements: function() {
                const achievementsList = document.getElementById('achievements-list');
                achievementsList.innerHTML = ""; // Önceki başarımları temizle

                this.predefinedAchievements.forEach(achievement => {
                    // Başarımları daha önce tamamlandıysa işaretle
                    if (this.awardedLevels[`achievement_${achievement.id}`]) {
                        achievement.completed = true;
                    }

                    const achievementDiv = document.createElement('div');
                    achievementDiv.className = 'achievement';
                    achievementDiv.id = `achievement-${achievement.id}`;
                    achievementDiv.innerHTML = `
                        <span>${achievement.description}</span>
                        <span class="checkmark">${achievement.completed ? "✔️" : "❌"}</span>
                    `;
                    if (achievement.completed) {
                        achievementDiv.classList.add('completed');
                    }
                    achievementsList.appendChild(achievementDiv);
                });
            },

            // Update Achievements
            updateAchievements: function() {
                this.predefinedAchievements.forEach(achievement => {
                    if (!achievement.completed) {
                        let achieved = false;
                        if (achievement.coinAmount && this.state.coins >= achievement.coinAmount) {
                            achieved = true;
                        }
                        if (achievement.farmCount && this.state.farmCount >= achievement.farmCount) {
                            achieved = true;
                        }

                        if (achieved) {
                            achievement.completed = true;
                            const achievementDiv = document.getElementById(`achievement-${achievement.id}`);
                            if (achievementDiv) {
                                achievementDiv.classList.add('completed');
                                achievementDiv.querySelector('.checkmark').textContent = "✔️";
                            }
                            this.awardedLevels[`achievement_${achievement.id}`] = true;
                            localStorage.setItem('awardedLevels', JSON.stringify(this.awardedLevels));

                            // Seviye ödüllerini güncelle
                            // Firestore olmadığı için bu kısmı kaldırıyoruz
                        }
                    }
                });
            },

            // Add XP
            addXP: function(amount) {
                if (isNaN(amount)) {
                    console.error(`Geçersiz XP miktarı: ${amount}`);
                    return;
                }
                this.playerXP += amount * this.state.xpMultiplier; // XP multiplier uygulama
                console.log(`XP Eklendi: +${amount * this.state.xpMultiplier}, Toplam XP: ${this.playerXP}`);
                this.updateXPDisplay();
                this.checkLevelUp();
            },

            // Check Level Up
            checkLevelUp: function() {
                let xpNeeded = this.playerLevel * 100;
                while (this.playerXP >= xpNeeded) {
                    this.playerLevel++;
                    this.playerXP -= xpNeeded;
                    alert(languageData[currentLanguage].levelUpMessage(this.playerLevel));
                    this.checkLevelRewards();
                    this.updateXPDisplay();
                    this.updateProgressBar();
                    this.updateAchievements();
                    xpNeeded = this.playerLevel * 100;
                }
            },

            // Check Level Rewards
            checkLevelRewards: function() {
                if (this.rewardLevels[this.playerLevel] && !this.awardedLevels[`reward_sv${this.playerLevel}`]) {
                    this.addXP(this.rewardLevels[this.playerLevel].xp);
                    alert(languageData[currentLanguage].rewardCollected(this.rewardLevels[this.playerLevel].xp));
                    this.awardedLevels[`reward_sv${this.playerLevel}`] = true;
                    localStorage.setItem('awardedLevels', JSON.stringify(this.awardedLevels));

                    this.updateDisplay();
                }
            },

            // Update XP Display
            updateXPDisplay: function() {
                document.getElementById("xp-text").textContent = this.playerXP;
                document.getElementById("home-level").textContent = this.playerLevel;
                document.getElementById("home-xp").textContent = this.playerXP;
                document.getElementById("home-xp-needed").textContent = this.playerLevel * 100;
                document.getElementById("home-energy").textContent = this.state.energy;
            },

            // Format Time
            formatTime: function(ms) {
                const totalSeconds = Math.floor(ms / 1000);
                const hours = Math.floor((totalSeconds / 3600) % 24);
                const minutes = Math.floor((totalSeconds / 60) % 60);
                return `${hours}h ${minutes}m`;
            },

            // Update Daily Reward Timer
            updateDailyRewardTimer: function() {
                const now = Date.now();
                const lastCollectedTime = this.lastCollected;
                const oneDay = 24 * 60 * 60 * 1000;
                const remainingTime = Math.max(0, oneDay - (now - lastCollectedTime));

                const timerElement = document.getElementById('daily-reward-timer');
                const startButton = document.querySelector('.start-button');

                if (remainingTime > 0) {
                    timerElement.textContent = languageData[currentLanguage].remainingTime(this.formatTime(remainingTime));
                    startButton.disabled = true;
                } else {
                    timerElement.textContent = languageData[currentLanguage].rewardReady;
                    startButton.disabled = false;
                }
            },

            // Collect Daily Reward
            collectDailyReward: function() {
                const now = Date.now();
                const oneDay = 24 * 60 * 60 * 1000;

                if (now - this.lastCollected >= oneDay) {
                    this.state.coins += 5000;
                    this.lastCollected = now;
                    localStorage.setItem('lastCollected', this.lastCollected);
                    this.saveGame();

                    alert(languageData[currentLanguage].dailyRewardCollected);
                    this.updateDisplay();
                    this.updateDailyRewardTimer();

                    // Countdown Başlat
                    if (this.countdownInterval) clearInterval(this.countdownInterval);
                    this.countdownInterval = setInterval(() => {
                        const now = Date.now();
                        const remainingTime = Math.max(0, oneDay - (now - this.lastCollected));
                        if (remainingTime > 0) {
                            document.getElementById('daily-reward-timer').textContent = languageData[currentLanguage].remainingTime(this.formatTime(remainingTime));
                        } else {
                            document.getElementById('daily-reward-timer').textContent = languageData[currentLanguage].rewardReady;
                            document.querySelector('.start-button').disabled = false;
                            clearInterval(this.countdownInterval);
                        }
                    }, 1000);
                } else {
                    const remainingTime = oneDay - (now - this.lastCollected);
                    alert(languageData[currentLanguage].dailyRewardCooldown(this.formatTime(remainingTime)));
                }
            },

            // Claim Level Reward
            claimLevelReward: function(level) {
                if (this.playerLevel >= level && !this.awardedLevels[`reward_sv${level}`]) {
                    const xpAmount = this.rewardLevels[level].xp;
                    this.addXP(xpAmount);
                    this.awardedLevels[`reward_sv${level}`] = true;
                    localStorage.setItem('awardedLevels', JSON.stringify(this.awardedLevels));

                    alert(languageData[currentLanguage].rewardCollected(xpAmount));
                    this.updateDisplay();
                    this.updateEarnRewards();
                } else if (this.awardedLevels[`reward_sv${level}`]) {
                    alert(languageData[currentLanguage].rewardAlreadyClaimed);
                } else {
                    alert(languageData[currentLanguage].insufficientLevel);
                }
            },

            // Update Earn Rewards
            updateEarnRewards: function() {
                const levels = [10, 20, 30, 40, 50, 100];
                levels.forEach(level => {
                    const button = document.getElementById(`claim-reward-${level}`);
                    if (this.playerLevel >= level && !this.awardedLevels[`reward_sv${level}`]) {
                        button.disabled = false;
                        button.classList.add('enabled');
                        button.classList.remove('disabled');
                        button.textContent = languageData[currentLanguage].claimButton;
                    } else if (this.awardedLevels[`reward_sv${level}`]) {
                        button.disabled = true;
                        button.classList.add('disabled');
                        button.classList.remove('enabled');
                        button.textContent = languageData[currentLanguage].claimedButton;
                    } else {
                        button.disabled = true;
                        button.classList.add('disabled');
                        button.classList.remove('enabled');
                        button.textContent = languageData[currentLanguage].levelUnreached;
                    }
                });
            },

            // Update Home Display
            updateHomeDisplay: function() {
                document.getElementById("home-level").textContent = this.playerLevel;
                document.getElementById("home-coins").textContent = Math.floor(this.state.coins).toLocaleString();
                document.getElementById("home-xp").textContent = this.playerXP;
                document.getElementById("home-xp-needed").textContent = this.playerLevel * 100;
                document.getElementById("home-energy").textContent = this.state.energy;
            },

            // Update Progress Bar
            updateProgressBar: function() {
                const progressBarFill = document.getElementById('progress-bar-fill');
                const progressPercentage = (this.playerXP / (this.playerLevel * 100)) * 100;
                progressBarFill.style.width = `${progressPercentage}%`;
            },

            // Style No1Game Header
            styleNo1Game: function() {
                const homeContainer = document.getElementById('home-container');
                const no1GameHeader = homeContainer.querySelector('h1');
                no1GameHeader.style.fontFamily = "'Pacifico', cursive";
                no1GameHeader.style.color = "#1f3f60";
                no1GameHeader.style.textShadow = "2px 2px 8px rgba(255, 165, 0, 0.8)";
            },

            // Hide All Containers
            hideAllContainers: function() {
                const containers = ["boost-container", "earn-container", "home-container", "friends-container"];
                containers.forEach(id => {
                    document.getElementById(id).style.display = "none";
                });
            },

            // Show Boost Container
            showBoostContainer: function() {
                this.hideAllContainers();
                document.getElementById("boost-container").style.display = "block";
            },

            // Handle Farm Click
            handleFarmClick: function() {
                if (this.state.energy >= 33) {
                    this.state.coins += this.state.clickPower;
                    this.state.energy -= 33;
                    this.state.farmCount += 1;
                    this.addXP(10);
                    this.updateDisplay();
                    this.updateAchievements();
                    console.log("Farm yapıldı. Coin:", this.state.coins, "Enerji:", this.state.energy, "Farm Sayısı:", this.state.farmCount, "XP:", this.playerXP);
                    this.saveGame();
                } else {
                    alert(languageData[currentLanguage].notEnoughEnergy);
                }
            },

            // Handle Upgrade
            handleUpgrade: function(type) {
                const cost = this.state.upgrades[type].cost;
                if (this.state.coins >= cost) {
                    this.state.coins -= cost;
                    console.log(`Upgrade Yapıldı: ${type}, Maliyet: ${cost}, Kalan Coin: ${this.state.coins}`);

                    switch(type) {
                        case 'click':
                            this.state.clickPower = Math.floor(this.state.clickPower * 1.5);
                            break;
                        case 'auto':
                            this.state.autoCollectPower += 1;
                            break;
                        case 'energy':
                            this.state.energy += 200;
                            break;
                        case 'xp':
                            this.state.upgrades.xp.multiplier += 0.5; // XP Multiplier Artırma
                            this.state.xpMultiplier = this.state.upgrades.xp.multiplier;
                            break;
                    }

                    // Maliyetleri Güncelleme
                    this.state.upgrades[type].cost = Math.floor(cost * 2);
                    this.state.upgrades[type].level++;
                    this.updateDisplay();
                    this.saveGame();
                } else {
                    alert(languageData[currentLanguage].notEnoughCoins);
                }
            },

            // Setup Event Listeners
            setupEventListeners: function() {
                // Navigasyon butonları
                document.getElementById('nav-container').addEventListener('click', (event) => {
                    const navButton = event.target.closest('.nav-button');
                    if(navButton) {
                        this.hideAllContainers();
                        const containerId = navButton.id.replace('-nav', '-container');
                        document.getElementById(containerId).style.display = 'block';
                    }
                });

                // Farm butonu
                document.getElementById('farm-button').addEventListener('click', () => this.handleFarmClick());

                // Upgrade butonları
                ['click', 'auto', 'energy', 'xp'].forEach(type => {
                    document.getElementById(`${type}-upgrade`).addEventListener('click', () => this.handleUpgrade(type));
                });

                // Dil butonları
                document.getElementById('lang-tr').addEventListener('click', () => this.setLanguage('tr'));
                document.getElementById('lang-en').addEventListener('click', () => this.setLanguage('en'));

                // Günlük ödül butonu
                document.getElementById('collect-daily-reward-button').addEventListener('click', () => this.collectDailyReward());

                // Sayfa kapatılmadan önce kaydetme
                window.addEventListener('beforeunload', () => this.saveGame());
            },

            // Start Intervals
            startIntervals: function() {
                this.gameInterval = setInterval(() => {
                    // Otomatik toplama
                    if (this.state.autoCollectPower > 0) {
                        this.state.coins += this.state.autoCollectPower;
                        this.updateDisplay();
                        this.updateAchievements();
                        console.log(`Otomatik Toplama: +${this.state.autoCollectPower} Coin`);
                        this.saveGame();
                    }

                    // Enerji yenileme
                    if (this.state.energy < 1000) {
                        this.state.energy = Math.min(this.state.energy + 20, 1000);
                        this.updateDisplay();
                        console.log(`Enerji Yenileniyor: ${this.state.energy}`);
                        this.saveGame();
                    }

                    // XP ekleme
                    this.addXP(this.state.xpMultiplier);
                    this.updateDailyRewardTimer();
                    console.log(`Her saniye +${this.state.xpMultiplier} XP`);
                    this.saveGame();
                }, 1000);
            },

            // Set Language
            setLanguage: function(lang) {
                currentLanguage = lang;
                localStorage.setItem('language', lang);
                this.updateLanguage();
            },

            // Update Language
            updateLanguage: function() {
                const lang = languageData[currentLanguage];

                // Başlıkları güncelleme
                document.getElementById('welcome-message').textContent = lang.welcomeMessage;
                document.getElementById('game-title').textContent = lang.gameTitle;
                document.getElementById('player-stats-title').textContent = lang.playerStatsTitle;
                document.getElementById('total-coins-stat').childNodes[0].textContent = `${lang.totalCoinsStat} `;
                document.getElementById('level-stat').childNodes[0].textContent = `${lang.levelStat} `;
                document.getElementById('xp-stat').childNodes[0].textContent = `${lang.xpStat} `;
                document.getElementById('energy-stat').childNodes[0].textContent = `${lang.energyStat} `;
                document.getElementById('achievements-title').textContent = lang.achievementsTitle;
                document.getElementById('progress-title').textContent = lang.progressTitle;
                document.getElementById('daily-tip').textContent = lang.dailyTip;

                // Boost Bölümü (Geliştir)
                document.getElementById('farm-button').textContent = lang.farmButton;
                document.getElementById('boost-section-title').textContent = lang.boostSectionTitle;
                document.getElementById('click-upgrade-text').textContent = lang.clickUpgrade;
                document.getElementById('auto-upgrade-text').textContent = lang.autoUpgrade;
                document.getElementById('energy-upgrade-text').textContent = lang.energyUpgrade;
                document.getElementById('xp-upgrade-text').textContent = lang.xpUpgrade;

                // Upgrade Cost Güncellemeleri
                document.getElementById('click-cost').textContent = `${lang.upgradeCost} ${this.state.upgrades.click.cost.toLocaleString()} coin`;
                document.getElementById('auto-cost').textContent = `${lang.upgradeCost} ${this.state.upgrades.auto.cost.toLocaleString()} coin`;
                document.getElementById('energy-cost').textContent = `${lang.upgradeCost} ${this.state.upgrades.energy.cost.toLocaleString()} coin`;
                document.getElementById('xp-cost').textContent = `${lang.upgradeCost} ${this.state.upgrades.xp.cost.toLocaleString()} coin`;

                // Kaynak başlıkları
                document.getElementById('coin-title').textContent = lang.coinTitle;
                document.getElementById('cps-title').textContent = lang.cpsTitle;
                document.getElementById('energy-title').textContent = lang.energyTitle;
                document.getElementById('xp-title').textContent = lang.xpTitle;
                document.getElementById('xp-multiplier-title').textContent = lang.xpUpgrade;

                // Earn Bölümü (Kazanç)
                document.getElementById('daily-reward-title').textContent = lang.dailyRewardTitle;
                document.getElementById('collect-daily-reward-button').textContent = lang.collectDailyRewardButton;
                document.getElementById('level-rewards-title').textContent = lang.levelRewardsTitle;

                // Level Rewards Texts
                document.getElementById('level-reward-10-text').textContent = lang.levelRewardText(10, 1000);
                document.getElementById('level-reward-20-text').textContent = lang.levelRewardText(20, 2000);
                document.getElementById('level-reward-30-text').textContent = lang.levelRewardText(30, 5000);
                document.getElementById('level-reward-40-text').textContent = lang.levelRewardText(40, 7000);
                document.getElementById('level-reward-50-text').textContent = lang.levelRewardText(50, 10000);
                document.getElementById('level-reward-100-text').textContent = lang.levelRewardText(100, 50000);

                // Friends Bölümü (Arkadaşlar)
                document.getElementById('friends-title').textContent = lang.friendsTitle;
                document.getElementById('total-referrals-text').childNodes[0].textContent = `${lang.totalReferralsText} `;
                document.getElementById('invite-link-text').textContent = lang.inviteLinkText;

                // Navigasyon Çubuğu
                document.getElementById('nav-home-text').textContent = lang.navHome;
                document.getElementById('nav-earn-text').textContent = lang.navEarn;
                document.getElementById('nav-boost-text').textContent = lang.navBoost;
                document.getElementById('nav-friends-text').textContent = lang.navFriends;

                // Başarımlar
                this.loadAchievements();

                // Günlük Ödül Zamanlayıcısı
                this.updateDailyRewardTimer();
            },

            // Display Güncelleme Fonksiyonu
            updateDisplay: function() {
                document.getElementById('coin-value').textContent = Math.floor(this.state.coins).toLocaleString();
                document.getElementById('cps-value').textContent = this.state.autoCollectPower.toFixed(1);
                document.getElementById('energy-value').textContent = Math.floor(this.state.energy).toLocaleString();
                document.getElementById('xp-text').textContent = this.playerXP;

                // Yeni XP Multiplier
                document.getElementById('xp-value').textContent = `${this.state.xpMultiplier.toFixed(1)}x`;

                // Upgrade Cost Güncellemeleri
                document.getElementById('click-cost').textContent = `${languageData[currentLanguage].upgradeCost} ${this.state.upgrades.click.cost.toLocaleString()} coin`;
                document.getElementById('auto-cost').textContent = `${languageData[currentLanguage].upgradeCost} ${this.state.upgrades.auto.cost.toLocaleString()} coin`;
                document.getElementById('energy-cost').textContent = `${languageData[currentLanguage].upgradeCost} ${this.state.upgrades.energy.cost.toLocaleString()} coin`;
                document.getElementById('xp-cost').textContent = `${languageData[currentLanguage].upgradeCost} ${this.state.upgrades.xp.cost.toLocaleString()} coin`;

                this.updateUpgradeButtons();
                this.updateProgressBar();
                this.updateHomeDisplay();
                this.updateEarnRewards();
                this.updateFriendsDisplay();
            },

            // Update Upgrade Buttons
            updateUpgradeButtons: function() {
                ['click', 'auto', 'energy', 'xp'].forEach(type => {
                    const button = document.getElementById(`${type}-upgrade`);
                    const cost = this.state.upgrades[type].cost;
                    const canAfford = this.state.coins >= cost;
                    button.className = `upgrade-button ${canAfford ? 'active' : 'inactive'}`;
                    button.disabled = !canAfford;
                });
            },

            // Update Friends Display
            updateFriendsDisplay: function() {
                const referrals = this.state.referrals || 0;
                document.getElementById('referral-count').textContent = referrals;
                document.getElementById('referral-info').textContent = `+1 Davet = 20.000 Coin`;
            },

            // Load Friend List
            loadFriendList: function() {
                const friendsList = document.getElementById('friends-list');
                friendsList.innerHTML = ""; // Önceki arkadaşları temizle

                // Gerçek uygulamada, arkadaş verilerini başka bir kaynaktan almanız gerekecek
                // Bu örnekte statik arkadaş verileri gösteriliyor
                const friends = [
                    { avatar: 'https://i.pravatar.cc/40?img=1', name: 'Arkadaş1', level: 10 },
                    { avatar: 'https://i.pravatar.cc/40?img=2', name: 'Arkadaş2', level: 15 },
                    { avatar: 'https://i.pravatar.cc/40?img=3', name: 'Arkadaş3', level: 20 },
                ];

                friends.forEach(friend => {
                    const friendDiv = document.createElement('div');
                    friendDiv.className = 'friend';
                    friendDiv.innerHTML = `
                        <img src="${friend.avatar}" alt="${friend.name} Avatarı" class="friend-avatar">
                        <div class="friend-info">
                            <span class="friend-name">${friend.name}</span>
                            <span class="friend-level">Seviye: ${friend.level}</span>
                        </div>
                    `;
                    friendsList.appendChild(friendDiv);
                });
            },

            // Share on Facebook
            shareOnFacebook: function() {
                const url = encodeURIComponent(this.generateInviteLink());
                window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
            },

            // Share on Twitter
            shareOnTwitter: function() {
                const text = encodeURIComponent("No1Game'e katılmak için bu linki kullanın!");
                const url = encodeURIComponent(this.generateInviteLink());
                window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
            },

            // Share on WhatsApp
            shareOnWhatsApp: function() {
                const url = encodeURIComponent(this.generateInviteLink());
                window.open(`https://api.whatsapp.com/send?text=No1Game'e katılmak için bu linki kullanın: ${url}`, '_blank');
            },

            // Generate Invite Link
            generateInviteLink: function() {
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                if (currentUser) {
                    return `${window.location.origin}${window.location.pathname}?referral=${currentUser.id}`;
                } else {
                    console.error("Kullanıcı henüz oluşturulmamış.");
                    return "#";
                }
            },

            // Add Social Share Buttons Invite Link
            addSocialShareButtons: function() {
                const inviteLinkElement = document.getElementById('invite-link');
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                if (currentUser) {
                    const inviteLink = this.generateInviteLink();
                    console.log("Invite Link:", inviteLink);
                    inviteLinkElement.href = inviteLink;
                    inviteLinkElement.textContent = inviteLink;
                } else {
                    console.error("Kullanıcı henüz oluşturulmamış.");
                    inviteLinkElement.textContent = "Davet Linki Yüklenemedi.";
                }
            },

            // Create New User
            createNewUser: function() {
                const userId = 'user_' + Math.random().toString(36).substr(2, 9);
                const userData = {
                    id: userId,
                    coins: this.state.coins,
                    referrals: this.state.referrals || 0,
                    farmCount: this.state.farmCount || 0,
                    upgrades: this.state.upgrades || {},
                    awardedLevels: this.awardedLevels || {},
                    referralsMade: false
                };
                localStorage.setItem(`user_${userId}`, JSON.stringify(userData));
                localStorage.setItem('currentUser', JSON.stringify(userData));
                return userData;
            },

            // Process Referral
            processReferral: function() {
                const urlParams = new URLSearchParams(window.location.search);
                const referralId = urlParams.get('referral');

                if (referralId) {
                    let currentUser = JSON.parse(localStorage.getItem('currentUser'));
                    if (!currentUser) {
                        currentUser = this.createNewUser();
                    }

                    if (referralId !== currentUser.id) {
                        let referrerData = JSON.parse(localStorage.getItem(`user_${referralId}`));
                        if (referrerData && !referrerData.referralsMade) {
                            referrerData.coins += 20000;
                            referrerData.referrals += 1;
                            referrerData.referralsMade = true;
                            localStorage.setItem(`user_${referralId}`, JSON.stringify(referrerData));

                            alert(`Bir arkadaşınızı davet ettiniz ve 20.000 Coin kazandınız!`);
                            this.state.referrals += 1;
                            this.saveGame();
                            this.updateDisplay();
                        }
                    }

                    window.history.replaceState({}, document.title, window.location.pathname);
                }
            },

            // Update Friends Display
            updateFriendsDisplay: function() {
                const referrals = this.state.referrals || 0;
                document.getElementById('referral-count').textContent = referrals;
                document.getElementById('referral-info').textContent = `+1 Davet = 20.000 Coin`;
            },

            // Display Daily Tip
            displayDailyTip: function() {
                const dailyTips = currentLanguage === 'tr' ? [
                    "Enerjinizi daha verimli kullanmak için enerji yükseltmelerini tercih edin!",
                    "Otomatik toplayıcılarınızı yükselterek daha fazla coin kazanın!",
                    "Seviye ödüllerini kaçırmayın, her seviyede büyük ödüller sizi bekliyor!",
                    "Daha fazla XP kazanmak için farm butonuna sık sık tıklayın!"
                ] : [
                    "Prioritize energy upgrades to use your energy more efficiently!",
                    "Upgrade your auto collectors to earn more coins!",
                    "Don't miss level rewards; great prizes await at each level!",
                    "Click the farm button frequently to earn more XP!"
                ];
                const today = new Date().getDate();
                const tipIndex = today % dailyTips.length;
                document.getElementById('daily-tip').textContent = `${languageData[currentLanguage].dailyTip} ${dailyTips[tipIndex]}`;
            },

            // Increment Days Logged In
            incrementDaysLoggedIn: function() {
                const today = new Date().toDateString();
                if (this.lastLoginDate !== today) {
                    this.daysLoggedIn++;
                    this.lastLoginDate = today;
                    localStorage.setItem('daysLoggedIn', this.daysLoggedIn);
                    localStorage.setItem('lastLoginDate', this.lastLoginDate);
                    this.updateHomeDisplay();
                    console.log(`Gün Sayısı Artırıldı: ${this.daysLoggedIn}`);
                }
            }
        };

        // Initialize Game on Load
        window.addEventListener('load', () => {
            Game.init();

            // Başlangıçta Boost bölümünü göster
            Game.hideAllContainers();
            document.getElementById("boost-container").style.display = "block";

            // Dil Ayarını Güncelle
            Game.updateLanguage();

            // Arkadaş Listesini Yükle
            Game.loadFriendList();

            // Sosyal Paylaşım Butonlarını Güncelle
            Game.addSocialShareButtons();
        });

    </script>
</body>
</html>
